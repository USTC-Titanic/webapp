<!DOCTYPE html>
<html>
<head>
	<title>新闻资讯</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://cdn.bootcss.com/twitter-bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="/static/mynavbar.css">
	<link rel="stylesheet" href="/static/news/news.css">
</head>

<body>
	<header id="myheader" class="navbar navbar-expand-md navbar-dark fixed-top">
		<div class="container">
			<section id="mybrand">
				<a class="navbar-brand" href="/">机器学习</a>
			</section>
			<button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarCollapse">
				<span class="navbar-toggler-icon"></span>
			</button>
			<section class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
				<ul class="navbar-nav">
					<li class="nav-item mr-4">
						<a class="nav-link" href="/tutorial">入门教程</a>
					</li>
					<li class="nav-item mr-4">
						<a class="nav-link" href="/practice">实战教程</a>
					</li>
					<li class="nav-item mr-4">
						<a class="nav-link" href="/news">新闻资讯</a>
					</li>
					<li class="nav-item mr-4">
						<a class="nav-link" href="/blog">开发日志</a>
					</li>
				</ul>
				<div v-if="nickname">
					<ul class="navbar-nav">
						<li class="nav-item">
							<a class="nav-link" href="/profile">{{ nickname }}</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="/signout">注销</a>
						</li>
					</ul>
				</div>
				<div v-else>
					<ul class="navbar-nav">
						<li class="nav-item">
							<a class="nav-link" href="/signin">登录</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="/signup">注册</a>
						</li>
					</ul>
				</div>
			</section>
		</div>
	</header>

	<main class="container" id="newspage">
		<aside>
			<section id="sidebar">
				<div id="sidebar-title">新闻源</div>
				<div>
					<ul id="sidebar-menu">
						<li v-on:click="news_list = src_netease">网易智能</li>
						<li v-on:click="news_list = src_36kr">36kr</li>
						<li v-on:click="news_list = src_huxiu">虎嗅</li>
					</ul>
				</div>
			</section>
		</aside>
		<article class="row">
			<div class="col-6 newsitem" v-for="(news, key) in news_list" v-bind:key="key">
				<section class="newscard" v-bind:data-target="'#content-' + key" data-toggle="modal">
					<div class="newsheader">{{ news.title }}</div>
					<div class="newsdigest">{{ news.content.substring(0, 32) }} ...</div>
				</section>
				<section class="modal fade" v-bind:id="'content-' + key" tabindex="-1">
					<div class="modal-dialog modal-content">
						<!-- <div class=""> -->
							<div class="modal-header">
								<h5 class="modal-title">{{ news.title }}</h5>
							</div>

							<div class="modal-body">{{ news.content }}</div>

							<div class="modal-body" v-show="news.url"><a v-bind:href="news.url">阅读原文</a></div>

							<div class="modal-footer justify-content-between">
								<div><time v-show="news.time">{{ news.time | get_time_delay }}</time></div>
								<div>
									<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
								</div>
							</div>
						<!-- </div> -->
					</div>
				</section>
			</div>
		</article>
	</main>

</body>
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.slim.min.js"></script>
<script src="https://cdn.bootcss.com/twitter-bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="https://cdn.bootcss.com/vue/2.5.13/vue.js"></script>
<script src="https://cdn.bootcss.com/axios/0.17.1/axios.js"></script>
<script src="/static/news/news.js"></script>

<section class="row justify-content-end">
	<div class="col-1 text-right">
		<button type="button" id="go-to-top" class="btn btn-sm btn-outline-primary" onclick="goToTop()" style="display: none; position: fixed; bottom: 80px; right: 16px;">↑</button>
	</div>
</section>

<script type="text/javascript">
// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function(){
	if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
		document.getElementById("go-to-top").style.display = "block";
	} else {
		document.getElementById("go-to-top").style.display = "none";
	}
};

// https://www.w3schools.com/tags/ev_onclick.asp
// http://www.w3school.com.cn/jsref/met_win_setinterval.asp
function goToTop(){
	let t = setInterval( function(){
		if( document.documentElement.scrollTop <= 0 ){
			clearInterval(t);
		}else{
			document.documentElement.scrollTop -= 40;
		}
	}, 20);
};
</script>

</html>

